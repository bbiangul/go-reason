# GoReason v6 Evaluation Report — Model Comparison: Gemini Flash vs GPT-OSS-120B

## Purpose

Test whether eval failures are **LLM capability-related** or **retrieval/chunking-related** by running the exact same retrieval DB with a different chat model (Gemini Flash 2.0 vs GPT-OSS-120B on Groq).

Same DB, same embeddings, same retrieval pipeline — only the chat model changes.

## Configuration

| Parameter | v6 (this run) | v5 (baseline) |
|-----------|--------------|---------------|
| **Chat provider** | **gemini** | groq |
| **Chat model** | **gemini-2.0-flash** | openai/gpt-oss-120b |
| Embed provider | openai | openai |
| Embed model | text-embedding-3-small | text-embedding-3-small |
| Embed dim | 1536 | 1536 |
| Max results | 25 (adaptive: 40 for synthesis) | 25 (adaptive: 40 for synthesis) |
| Max rounds | 3 | 3 |
| RRF weights | vec=1.0, fts=1.0, graph=0.5 | vec=1.0, fts=1.0, graph=0.5 |
| Temperature | 0 | 0 |
| DB | `evals/runs/2026-02-04_19-45-07/goreason.db` | `evals/runs/2026-02-04_12-10-20/goreason.db` |
| Running header fix | **No** (DB pre-dates fix) | **Yes** |
| Eval time | 10m 24s | ~12m |

**Important:** The v6 DB does NOT include the `fixRunningHeaders` parser fix (ingested before implementation). The v5 DB does. This affects 4 easy tests related to page-boundary heading loss.

## Results Summary

| Difficulty | v6 (Gemini Flash) | v5 (GPT-OSS-120B) | Delta |
|-----------|-------------------|-------------------|-------|
| Easy | **26/30 (86.7%)** | 30/30 (100%) | -4 |
| Medium | **28/30 (93.3%)** | 30/30 (100%) | -2 |
| Hard | **27/30 (90.0%)** | 30/30 (100%) | -3 |
| Super-Hard | **42/50 (84.0%)** | 50/50 (100%) | -8 |
| **Total** | **123/140 (87.9%)** | **140/140 (100%)** | **-17** |

### Adjusted Results (excluding 429 rate limit errors)

3 tests failed due to Gemini free-tier rate limiting (429), not model quality:

| Difficulty | Adjusted v6 | v5 | Delta |
|-----------|------------|-----|-------|
| Easy | 26/30 (86.7%) | 30/30 (100%) | -4 |
| Medium | 28/29 (96.6%) | 30/30 (100%) | -1 |
| Hard | 27/28 (96.4%) | 30/30 (100%) | -1 |
| Super-Hard | 42/50 (84.0%) | 50/50 (100%) | -8 |
| **Total** | **123/137 (89.8%)** | **140/140 (100%)** | **-14** |

## Failure Classification

### Category 1: Rate Limit Errors (3 tests) — NOT model quality

Gemini free-tier hit 429 RESOURCE_EXHAUSTED after max retries. These tests never got an LLM response.

| # | Difficulty | Question | v5 |
|---|-----------|----------|-----|
| M-25 | Medium | How does the encoder function in the inspection process? | PASS |
| H-5 | Hard | Compare the hardware differences between CPU CUBE and CPU IPC models | PASS |
| H-20 | Hard | Explain how the cylindrical transformation tool works with label inspection | PASS |

**Root cause:** Gemini free tier has aggressive rate limits. The eval runs queries back-to-back, exhausting the quota.
**Fix:** Use paid Gemini API tier, or add longer delays between queries.

### Category 2: Page-Boundary Heading Loss (4 tests) — DB issue, model-amplified

These 4 easy questions ALL relate to Tracker board specs on page 46. The running header "MANUAL TECNICO AV-FM, AV-FF" replaced the real heading "4.1 Tracker" due to page-boundary loss. The `fixRunningHeaders` fix resolves this but is NOT in the v6 DB.

| # | Question | Expected | Gemini Answer | v5 |
|---|----------|----------|---------------|-----|
| E-12 | Fuse rating for Tracker outputs | 6.3A, 250V | "documents do not specify the fuse rating" | PASS |
| E-13 | CPU CUBE processor | Intel i7 | "documents do not specify the processor" | PASS |
| E-18 | Tracker board inputs | 16 | "The tracker board has inputs and outputs" (no count) | PASS |
| E-19 | Tracker board outputs | 16 | "context does not explicitly state the number" | PASS |

**Root cause:** The chunks exist in the DB but are filed under the wrong heading ("MANUAL TECNICO" instead of "4.1 Tracker"). GPT-OSS-120B extracts the correct facts despite the misleading heading. Gemini Flash is more conservative — if the heading doesn't match the query context, it hedges with "documents do not specify."

**Why GPT-OSS-120B passes:** It reads the chunk content directly ("Fusible: 6.3A, 250V") and reports it regardless of the heading mismatch. It's less sensitive to heading context.

**Why Gemini Flash fails:** More cautious response style — treats heading-content mismatch as a signal that the info might not be relevant. Says "not specified" instead of extracting from content.

**Fix:** Re-ingest with `fixRunningHeaders` applied. Both models should pass on the corrected DB.

### Category 3: Model Quality — Conservative Synthesis (10 tests)

These are genuine model capability differences. Same retrieval, same chunks, but Gemini Flash produces weaker answers.

**Pattern observed:** Gemini Flash frequently says "The provided documents do not contain information on..." or "do not explicitly describe..." even when relevant chunks ARE retrieved. GPT-OSS-120B is more aggressive at synthesizing answers from partial evidence.

| # | Difficulty | Question | Acc | v5 Acc | Root Cause |
|---|-----------|----------|-----|--------|-----------|
| M-4 | Medium | Inspection process steps sequence | 0.25 | 0.50 | Model didn't link trigger→encoder→camera→rejection chain |
| H-30 | Hard | Commissioning workflow | 0.33 | 1.00 | Model found transport/installation refs but couldn't synthesize full workflow |
| SH-8 | Super-Hard | 12-hour production shift accuracy | 0.00 | 0.50 | Model said "not explicitly described" despite calibration/learning chunks |
| SH-10 | Super-Hard | Small medicine bottle optimization | 0.33 | 0.67 | Found SKU/container params but missed learning step |
| SH-19 | Super-Hard | Container params during changeover | 0.33 | 1.00 | Found container params but missed window + learning interaction |
| SH-24 | Super-Hard | Glossary inspection parameters | 0.00 | 0.50 | Found glossary ref but didn't extract threshold/Teach-In definitions |
| SH-25 | Super-Hard | Bottles without caps | 0.33 | 0.67 | Said "documents do not contain information" despite cap/defect chunks |
| SH-28 | Super-Hard | Future upgrades and expansions | 0.33 | 1.00 | Found software update ref but missed tracker/micro SD |
| SH-29 | Super-Hard | Fill level measurement parameters | 0.33 | 1.00 | Found reference height but missed pixel/learning/limit params |
| SH-30 | Super-Hard | Normative standards | 0.33 | 0.67 | Found MDIR but missed IP54 and risk group |

**Key insight:** 8 of 10 model quality failures are in Hard/Super-Hard categories. Gemini Flash handles Easy/Medium well (only 1 real failure excluding DB issues) but struggles with multi-fact synthesis and inference from partial context.

## Behavioral Differences

| Behavior | GPT-OSS-120B (Groq) | Gemini Flash 2.0 |
|----------|---------------------|-----------------|
| Response to partial evidence | Synthesizes from available chunks | Hedges: "documents do not specify" |
| Multi-fact extraction | Extracts 3+ facts from scattered chunks | Often stops at 1-2 facts |
| Heading-content mismatch | Ignores heading, reads content | Treats mismatch as relevance signal |
| Confidence in inference | Infers connections between chunks | Only reports explicitly stated info |
| Synthesis queries | Aggregates across 40 chunks effectively | Struggles with large context windows |

## Conclusions

### Is model quality a factor? YES.

The eval confirms what the user suspected: **LLM capabilities significantly affect answer quality**, especially for:

1. **Synthesis questions** (super-hard): 8 failures where the model must aggregate facts from 5+ chunks
2. **Multi-hop reasoning** (hard): 1 failure where the model must chain information across sections
3. **Conservative hedging**: Gemini Flash says "not specified" when GPT-OSS-120B would extract the answer

### What's NOT model-related:

1. **4 easy failures** are the DB page-boundary issue (would be fixed by re-ingesting with running header fix)
2. **3 errors** are Gemini rate limits, not capability
3. **All 5 anti-hallucination tests PASS** with both models — Gemini Flash correctly refuses to fabricate
4. **All 5 numerical tests PASS** with both models — precise fact extraction works fine
5. **All 5 reasoning tests PASS** with both models — calculations and logic are solid

### Model quality hierarchy for RAG:

| Model | Score | Speed | Notes |
|-------|-------|-------|-------|
| GPT-OSS-120B (Groq) | 140/140 (100%) | ~2-5s/query | Best synthesis, aggressive extraction |
| Gemini Flash 2.0 | 123/140 (87.9%) | ~1-3s/query | Fast, good for simple queries, struggles with synthesis |
| GPT-OSS-20B (Ollama) | ~96/140 (est.) | ~60-300s/query | Too slow for practical use, mediocre quality |

### Recommendation:

For production, use GPT-OSS-120B on Groq (or equivalent 100B+ model). Gemini Flash is viable for simple single-fact queries but drops ~12% on complex synthesis. The quality gap is most pronounced on super-hard questions requiring multi-chunk aggregation.

## Per-Test Easy Results

| # | Question | Acc | Status | v5 |
|---|----------|-----|--------|-----|
| 1 | Operating temperature range | 1.00 | PASS | PASS |
| 2 | Tracker board part number | 1.00 | PASS | PASS |
| 3 | Equipment operating voltage | 1.00 | PASS | PASS |
| 4 | Noise emission level | 1.00 | PASS | PASS |
| 5 | Air pressure requirement | 1.00 | PASS | PASS |
| 6 | Inspection bridge material | 1.00 | PASS | PASS |
| 7 | Weight of Model A Standard | 1.00 | PASS | PASS |
| 8 | IP protection rating | 1.00 | PASS | PASS |
| 9 | THD level required | 1.00 | PASS | PASS |
| 10 | Tracker board IP address | 1.00 | PASS | PASS |
| 11 | Subnet mask of the Tracker | 1.00 | PASS | PASS |
| **12** | **Fuse rating for Tracker outputs** | **0.00** | **FAIL** | PASS |
| **13** | **CPU CUBE processor** | **0.00** | **FAIL** | PASS |
| 14 | Preinstalled operating system | 1.00 | PASS | PASS |
| 15 | Encoder part number | 1.00 | PASS | PASS |
| 16 | Trigger sensor part number | 1.00 | PASS | PASS |
| 17 | Standard cap diameter | 1.00 | PASS | PASS |
| **18** | **Tracker board inputs** | **0.00** | **FAIL** | PASS |
| **19** | **Tracker board outputs** | **0.00** | **FAIL** | PASS |
| 20 | Tracker power supply voltage | 1.00 | PASS | PASS |
| 21 | Power consumption without AC | 1.00 | PASS | PASS |
| 22 | Power consumption with AC | 1.00 | PASS | PASS |
| 23 | Cut protection level for gloves | 1.00 | PASS | PASS |
| 24 | Wire gauge for cabling | 1.00 | PASS | PASS |
| 25 | Cabinet paint color | 1.00 | PASS | PASS |
| 26 | Protection window glass type | 1.00 | PASS | PASS |
| 27 | Weight of Model B cabinet | 1.00 | PASS | PASS |
| 28 | Weight of Model C Standard XL | 1.00 | PASS | PASS |
| 29 | Document revision date | 1.00 | PASS | PASS |
| 30 | Encoder pulses per revolution | 1.00 | PASS | PASS |

## Per-Test Medium Results

| # | Question | Acc | Status | v5 |
|---|----------|-----|--------|-----|
| 1 | Inspection types supported by AV-FM/AV-FF | 0.67 | PASS | PASS |
| 2 | Components tracked by Tracker board | 1.00 | PASS | PASS |
| 3 | Differences between AV-FM and AV-FF | 0.67 | PASS | PASS |
| **4** | **Sequence of steps in the inspection process** | **0.25** | **FAIL** | PASS |
| 5 | User roles in the system | 1.00 | PASS | PASS |
| 6 | Three SKU states | 1.00 | PASS | PASS |
| 7 | Screens in main menu | 1.00 | PASS | PASS |
| 8 | Signal beacon light colors | 1.00 | PASS | PASS |
| 9 | Safety standards compliance | 0.67 | PASS | PASS |
| 10 | Types of cooling systems | 1.00 | PASS | PASS |
| 11 | Electrical current at 120V | 1.00 | PASS | PASS |
| 12 | GUI header information | 1.00 | PASS | PASS |
| 13 | Cap tracking tool parameters | 1.00 | PASS | PASS |
| 14 | Data recorded by inspection system | 1.00 | PASS | PASS |
| 15 | Equipment models in manual | 1.00 | PASS | PASS |
| 16 | Power failure handling | 1.00 | PASS | PASS |
| 17 | Communication protocols | 1.00 | PASS | PASS |
| 18 | Environmental conditions | 1.00 | PASS | PASS |
| 19 | Personal protective equipment | 1.00 | PASS | PASS |
| 20 | Global Learning function | 1.00 | PASS | PASS |
| 21 | Container parameters | 1.00 | PASS | PASS |
| 22 | Inactivity timeout | 1.00 | PASS | PASS |
| 23 | Grounding specification | 1.00 | PASS | PASS |
| 24 | IMAGO outputs | 1.00 | PASS | PASS |
| **25** | **Encoder function** | **0.00** | **ERROR (429)** | PASS |
| 26 | Simultaneous inspections | 1.00 | PASS | PASS |
| 27 | Multicam cap opacity options | 1.00 | PASS | PASS |
| 28 | Laser sensor in Profiler | 0.50 | PASS | PASS |
| 29 | Bottle rejection in fill level | 1.00 | PASS | PASS |
| 30 | Steps to copy a SKU | 0.50 | PASS | PASS |

## Per-Test Hard Results

| # | Question | Acc | Status | v5 |
|---|----------|-----|--------|-----|
| 1 | Tracker + encoder + rejection coordination | 1.00 | PASS | PASS |
| 2 | Profiler + camera + IPC relationship | 1.00 | PASS | PASS |
| 3 | Safety measures for electrical hazards | 0.67 | PASS | PASS |
| 4 | Cap tracking + fill level together | 1.00 | PASS | PASS |
| **5** | **CPU CUBE vs CPU IPC hardware** | **0.00** | **ERROR (429)** | PASS |
| 6 | Data flow bottle detection to rejection | 0.80 | PASS | PASS |
| 7 | Warranty void conditions | 0.50 | PASS | PASS |
| 8 | Foam/opacity + fill level relation | 0.67 | PASS | PASS |
| 9 | Bottle size adaptation with SKU switch | 1.00 | PASS | PASS |
| 10 | Network connections and IP addresses | 1.00 | PASS | PASS |
| 11 | Role-based access control | 1.00 | PASS | PASS |
| 12 | Auxiliary inspection full/empty detection | 1.00 | PASS | PASS |
| 13 | Machine startup after power failure | 0.50 | PASS | PASS |
| 14 | Code percentage inspection + rejection | 0.67 | PASS | PASS |
| 15 | Floating object vs foam/opacity | 1.00 | PASS | PASS |
| 16 | Environmental conditions + cooling choice | 1.00 | PASS | PASS |
| 17 | Steps to configure new product | 0.67 | PASS | PASS |
| 18 | Unauthorized access prevention | 1.00 | PASS | PASS |
| 19 | Risk group classifications + safety reqs | 0.67 | PASS | PASS |
| **20** | **Cylindrical transformation + label** | **0.00** | **ERROR (429)** | PASS |
| 21 | UPS + noise filter protection | 1.00 | PASS | PASS |
| 22 | Tracking params + inspection accuracy | 1.00 | PASS | PASS |
| 23 | Alarm classes and significance | 1.00 | PASS | PASS |
| 24 | RGB learning color calibration | 1.00 | PASS | PASS |
| 25 | Shared container config for same-size bottles | 0.75 | PASS | PASS |
| 26 | Encoder calibration + rejection timing | 1.00 | PASS | PASS |
| 27 | Multi-camera result consolidation | 1.00 | PASS | PASS |
| 28 | Factory-level maintenance permissions | 1.00 | PASS | PASS |
| 29 | Transparent vs opaque containers | 1.00 | PASS | PASS |
| **30** | **Commissioning workflow** | **0.33** | **FAIL** | PASS |

## Per-Test Super-Hard Results

| # | Question | Cat | Acc | Status | v5 |
|---|----------|-----|-----|--------|-----|
| 1 | Troubleshooting incorrect rejections | synthesis | 1.00 | PASS | PASS |
| 2 | SKU container type switching | synthesis | 1.00 | PASS | PASS |
| 3 | Five inspection tools quality control | synthesis | 1.00 | PASS | PASS |
| 4 | Infrastructure requirements | synthesis | 1.00 | PASS | PASS |
| 5 | Partially filled beer bottle with foam | synthesis | 1.00 | PASS | PASS |
| 6 | Safety architecture analysis | synthesis | 1.00 | PASS | PASS |
| 7 | Failure modes and alarm responses | synthesis | 1.00 | PASS | PASS |
| **8** | **12-hour production shift accuracy** | **synthesis** | **0.00** | **FAIL** | PASS |
| 9 | Vortex vs Rittal AC comparison | synthesis | 1.00 | PASS | PASS |
| **10** | **Small medicine bottle optimization** | **synthesis** | **0.33** | **FAIL** | PASS |
| 11 | MDIR 2006/42/EC influence | synthesis | 1.00 | PASS | PASS |
| 12 | Data architecture | synthesis | 1.00 | PASS | PASS |
| 13 | Maintenance risks and mitigations | synthesis | 0.67 | PASS | PASS |
| 14 | Post-installation calibration | synthesis | 0.67 | PASS | PASS |
| 15 | Normative standards synthesis | synthesis | 0.67 | PASS | PASS |
| 16 | Image resolution, lens, accuracy | synthesis | 1.00 | PASS | PASS |
| 17 | Concurrent multi-camera inspections | synthesis | 0.67 | PASS | PASS |
| 18 | User management lifecycle | synthesis | 1.00 | PASS | PASS |
| **19** | **Container params during changeover** | **synthesis** | **0.33** | **FAIL** | PASS |
| 20 | Rejection timing at different speeds | synthesis | 1.00 | PASS | PASS |
| 21 | 10% humidity increase impact | synthesis | 1.00 | PASS | PASS |
| 22 | SKU strategy for 50 bottle sizes | synthesis | 0.67 | PASS | PASS |
| 23 | Electrical defense-in-depth | synthesis | 1.00 | PASS | PASS |
| **24** | **Glossary inspection parameters** | **synthesis** | **0.00** | **FAIL** | PASS |
| **25** | **Bottles without caps** | **synthesis** | **0.33** | **FAIL** | PASS |
| 26 | Operator training requirements | synthesis | 0.67 | PASS | PASS |
| 27 | Image acquisition pipeline | synthesis | 1.00 | PASS | PASS |
| **28** | **Future upgrades and expansions** | **synthesis** | **0.33** | **FAIL** | PASS |
| **29** | **Fill level measurement parameters** | **synthesis** | **0.33** | **FAIL** | PASS |
| **30** | **Normative standards and safety** | **synthesis** | **0.33** | **FAIL** | PASS |
| 31 | Foam compensation + window params | graph-multi-hop | 1.00 | PASS | PASS |
| 32 | Signal path trigger to rejection | graph-multi-hop | 1.00 | PASS | PASS |
| 33 | Alarm severity vs components | graph-multi-hop | 0.75 | PASS | PASS |
| 34 | Global Learning + pixel/mm + diameter | graph-multi-hop | 0.80 | PASS | PASS |
| 35 | Compensador 1 & 2 + encoder + low speed | graph-multi-hop | 1.00 | PASS | PASS |
| 36 | Max production speed (anti-halluc.) | anti-hallucination | 1.00 | PASS | PASS |
| 37 | Camera megapixels (anti-halluc.) | anti-hallucination | 1.00 | PASS | PASS |
| 38 | WiFi support (anti-halluc.) | anti-hallucination | 1.00 | PASS | PASS |
| 39 | ML/AI algorithms (anti-halluc.) | anti-hallucination | 1.00 | PASS | PASS |
| 40 | Cloud connectivity (anti-halluc.) | anti-hallucination | 0.50 | PASS | PASS |
| 41 | Current ratings 120V/240V | numerical | 1.00 | PASS | PASS |
| 42 | Weights Model A/B/C | numerical | 1.00 | PASS | PASS |
| 43 | Air pressure + edge size values | numerical | 1.00 | PASS | PASS |
| 44 | Ground voltage + wire gauge + cap | numerical | 0.67 | PASS | PASS |
| 45 | Timeout + pulse width + debounce | numerical | 0.67 | PASS | PASS |
| 46 | Encoder pulse divider calculation | reasoning | 1.00 | PASS | PASS |
| 47 | Foam compensation calculation | reasoning | 1.00 | PASS | PASS |
| 48 | SKU copy restriction | reasoning | 0.67 | PASS | PASS |
| 49 | Noise range 70-80 dB(A) | reasoning | 1.00 | PASS | PASS |
| 50 | Foam + Borde Inferior for beer | reasoning | 0.50 | PASS | PASS |

## Run Artifacts

| Artifact | Path |
|----------|------|
| Eval report | `evals/runs/2026-02-04_20-57-04/eval-report.json` |
| Eval log | `evals/runs/2026-02-04_20-57-04/eval.log` |
| Metadata | `evals/runs/2026-02-04_20-57-04/metadata.json` |
| DB used | `evals/runs/2026-02-04_19-45-07/goreason.db` (skip-ingest) |
